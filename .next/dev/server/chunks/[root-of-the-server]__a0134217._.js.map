{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Subham%20Bhattachrya/Desktop/EvalvAI-main/lib/gemini.ts"],"sourcesContent":["import { GoogleGenerativeAI } from '@google/generative-ai'\r\n\r\nconst apiKey = process.env.GEMINI_API_KEY\r\n\r\nif (!apiKey) {\r\n    console.error('âŒ GEMINI_API_KEY is not defined in environment variables')\r\n    console.error('Please check your .env.local file')\r\n    throw new Error('GEMINI_API_KEY is not defined in environment variables')\r\n}\r\n\r\nconsole.log('âœ… Gemini API Key loaded:', apiKey.substring(0, 10) + '...')\r\n\r\nconst genAI = new GoogleGenerativeAI(apiKey)\r\n\r\nexport const geminiModel = genAI.getGenerativeModel({ model: 'gemini-2.5-flash' })\r\n\r\nexport async function generateContent(prompt: string) {\r\n    try {\r\n        console.log('ðŸ¤– Calling Gemini API...')\r\n        const result = await geminiModel.generateContent(prompt)\r\n        const response = await result.response\r\n        const text = response.text()\r\n        console.log('âœ… Gemini API response received')\r\n        return text\r\n    } catch (error: any) {\r\n        console.error('âŒ Gemini API Error:', error)\r\n        console.error('Error details:', {\r\n            message: error.message,\r\n            status: error.status,\r\n            statusText: error.statusText\r\n        })\r\n\r\n        // Provide more specific error messages\r\n        if (error.message?.includes('API_KEY_INVALID')) {\r\n            throw new Error('Invalid Gemini API key. Please check your API key in .env.local')\r\n        }\r\n        if (error.message?.includes('QUOTA_EXCEEDED')) {\r\n            throw new Error('Gemini API quota exceeded. Please try again later or upgrade your plan')\r\n        }\r\n        if (error.message?.includes('RATE_LIMIT')) {\r\n            throw new Error('Rate limit exceeded. Please wait a moment and try again')\r\n        }\r\n\r\n        throw new Error(`Failed to generate content from Gemini API: ${error.message}`)\r\n    }\r\n}\r\n\r\nexport async function generateStreamContent(prompt: string) {\r\n    try {\r\n        const result = await geminiModel.generateContentStream(prompt)\r\n        return result.stream\r\n    } catch (error: any) {\r\n        console.error('âŒ Gemini API Stream Error:', error)\r\n        throw new Error(`Failed to generate stream from Gemini API: ${error.message}`)\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;AAEzC,IAAI,CAAC,QAAQ;IACT,QAAQ,KAAK,CAAC;IACd,QAAQ,KAAK,CAAC;IACd,MAAM,IAAI,MAAM;AACpB;AAEA,QAAQ,GAAG,CAAC,4BAA4B,OAAO,SAAS,CAAC,GAAG,MAAM;AAElE,MAAM,QAAQ,IAAI,oNAAkB,CAAC;AAE9B,MAAM,cAAc,MAAM,kBAAkB,CAAC;IAAE,OAAO;AAAmB;AAEzE,eAAe,gBAAgB,MAAc;IAChD,IAAI;QACA,QAAQ,GAAG,CAAC;QACZ,MAAM,SAAS,MAAM,YAAY,eAAe,CAAC;QACjD,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,MAAM,OAAO,SAAS,IAAI;QAC1B,QAAQ,GAAG,CAAC;QACZ,OAAO;IACX,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,QAAQ,KAAK,CAAC,kBAAkB;YAC5B,SAAS,MAAM,OAAO;YACtB,QAAQ,MAAM,MAAM;YACpB,YAAY,MAAM,UAAU;QAChC;QAEA,uCAAuC;QACvC,IAAI,MAAM,OAAO,EAAE,SAAS,oBAAoB;YAC5C,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,MAAM,OAAO,EAAE,SAAS,mBAAmB;YAC3C,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,MAAM,OAAO,EAAE,SAAS,eAAe;YACvC,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,IAAI,MAAM,CAAC,4CAA4C,EAAE,MAAM,OAAO,EAAE;IAClF;AACJ;AAEO,eAAe,sBAAsB,MAAc;IACtD,IAAI;QACA,MAAM,SAAS,MAAM,YAAY,qBAAqB,CAAC;QACvD,OAAO,OAAO,MAAM;IACxB,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM,CAAC,2CAA2C,EAAE,MAAM,OAAO,EAAE;IACjF;AACJ"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Subham%20Bhattachrya/Desktop/EvalvAI-main/app/api/question-generator/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { generateContent } from '@/lib/gemini'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { category, difficulty, count } = await request.json()\n\n    const prompt = `You are an expert interview question generator. Generate ${count} ${difficulty} level ${category} interview questions.\n\nCategory: ${category}\nDifficulty: ${difficulty}\nNumber of Questions: ${count}\n\nFor each question, provide:\n1. The question text\n2. A helpful hint\n3. A sample answer/approach\n\nRespond ONLY with valid JSON in this exact format:\n{\n  \"questions\": [\n    {\n      \"text\": \"question text here\",\n      \"hint\": \"helpful hint here\",\n      \"sampleAnswer\": \"detailed sample answer or approach here\"\n    }\n  ]\n}\n\nMake the questions realistic, relevant for ${category} interviews, and appropriate for ${difficulty} difficulty level.`\n\n    const response = await generateContent(prompt)\n\n    // Parse the JSON response\n    let result\n    try {\n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/)\n      if (jsonMatch) {\n        result = JSON.parse(jsonMatch[0])\n      } else {\n        throw new Error('No JSON found')\n      }\n    } catch (parseError) {\n      // Fallback with a default question\n      result = {\n        questions: [{\n          text: `Sample ${difficulty} ${category} question`,\n          hint: 'Think about the core concepts and break down the problem',\n          sampleAnswer: 'Approach this systematically by identifying the key requirements first'\n        }]\n      }\n    }\n\n    // Add IDs and metadata to questions\n    const questionsWithMetadata = result.questions.map((q: any, idx: number) => ({\n      id: `q-${Date.now()}-${idx}`,\n      text: q.text,\n      category,\n      difficulty,\n      hint: q.hint,\n      sampleAnswer: q.sampleAnswer\n    }))\n\n    return NextResponse.json({\n      questions: questionsWithMetadata,\n      totalCount: questionsWithMetadata.length\n    })\n  } catch (error: any) {\n    console.error('Question Generator Error:', error)\n    return NextResponse.json(\n      { message: error.message || 'Failed to generate questions' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE1D,MAAM,SAAS,CAAC,yDAAyD,EAAE,MAAM,CAAC,EAAE,WAAW,OAAO,EAAE,SAAS;;UAE3G,EAAE,SAAS;YACT,EAAE,WAAW;qBACJ,EAAE,MAAM;;;;;;;;;;;;;;;;;;2CAkBc,EAAE,SAAS,iCAAiC,EAAE,WAAW,kBAAkB,CAAC;QAEnH,MAAM,WAAW,MAAM,IAAA,gKAAe,EAAC;QAEvC,0BAA0B;QAC1B,IAAI;QACJ,IAAI;YACF,MAAM,YAAY,SAAS,KAAK,CAAC;YACjC,IAAI,WAAW;gBACb,SAAS,KAAK,KAAK,CAAC,SAAS,CAAC,EAAE;YAClC,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,YAAY;YACnB,mCAAmC;YACnC,SAAS;gBACP,WAAW;oBAAC;wBACV,MAAM,CAAC,OAAO,EAAE,WAAW,CAAC,EAAE,SAAS,SAAS,CAAC;wBACjD,MAAM;wBACN,cAAc;oBAChB;iBAAE;YACJ;QACF;QAEA,oCAAoC;QACpC,MAAM,wBAAwB,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,GAAQ,MAAgB,CAAC;gBAC3E,IAAI,CAAC,EAAE,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK;gBAC5B,MAAM,EAAE,IAAI;gBACZ;gBACA;gBACA,MAAM,EAAE,IAAI;gBACZ,cAAc,EAAE,YAAY;YAC9B,CAAC;QAED,OAAO,8KAAY,CAAC,IAAI,CAAC;YACvB,WAAW;YACX,YAAY,sBAAsB,MAAM;QAC1C;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,8KAAY,CAAC,IAAI,CACtB;YAAE,SAAS,MAAM,OAAO,IAAI;QAA+B,GAC3D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}