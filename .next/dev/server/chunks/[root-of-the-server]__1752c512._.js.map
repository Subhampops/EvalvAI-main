{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Subham%20Bhattachrya/Desktop/EvalvAI-main/lib/github.ts"],"sourcesContent":["// GitHub API utility functions\r\nexport interface GitHubRepo {\r\n    name: string\r\n    description: string | null\r\n    html_url: string\r\n    language: string | null\r\n    stargazers_count: number\r\n    forks_count: number\r\n    topics: string[]\r\n    created_at: string\r\n    updated_at: string\r\n    size: number\r\n}\r\n\r\nexport interface GitHubUser {\r\n    login: string\r\n    name: string | null\r\n    bio: string | null\r\n    public_repos: number\r\n    followers: number\r\n    following: number\r\n    avatar_url: string\r\n    html_url: string\r\n}\r\n\r\nexport async function fetchGitHubUser(username: string): Promise<GitHubUser> {\r\n    const response = await fetch(`https://api.github.com/users/${username}`)\r\n\r\n    if (!response.ok) {\r\n        throw new Error(`GitHub user not found: ${username}`)\r\n    }\r\n\r\n    return response.json()\r\n}\r\n\r\nexport async function fetchGitHubRepos(username: string): Promise<GitHubRepo[]> {\r\n    const response = await fetch(\r\n        `https://api.github.com/users/${username}/repos?sort=updated&per_page=100`\r\n    )\r\n\r\n    if (!response.ok) {\r\n        throw new Error(`Failed to fetch repositories for: ${username}`)\r\n    }\r\n\r\n    return response.json()\r\n}\r\n\r\nexport function extractUsernameFromUrl(url: string): string {\r\n    // Handle various GitHub URL formats\r\n    // https://github.com/username\r\n    // github.com/username\r\n    // username\r\n\r\n    const match = url.match(/github\\.com\\/([^\\/]+)/) || url.match(/^([^\\/]+)$/)\r\n\r\n    if (!match) {\r\n        throw new Error('Invalid GitHub URL or username')\r\n    }\r\n\r\n    return match[1]\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;;;AAyBxB,eAAe,gBAAgB,QAAgB;IAClD,MAAM,WAAW,MAAM,MAAM,CAAC,6BAA6B,EAAE,UAAU;IAEvE,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,UAAU;IACxD;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,eAAe,iBAAiB,QAAgB;IACnD,MAAM,WAAW,MAAM,MACnB,CAAC,6BAA6B,EAAE,SAAS,gCAAgC,CAAC;IAG9E,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,IAAI,MAAM,CAAC,kCAAkC,EAAE,UAAU;IACnE;IAEA,OAAO,SAAS,IAAI;AACxB;AAEO,SAAS,uBAAuB,GAAW;IAC9C,oCAAoC;IACpC,8BAA8B;IAC9B,sBAAsB;IACtB,WAAW;IAEX,MAAM,QAAQ,IAAI,KAAK,CAAC,4BAA4B,IAAI,KAAK,CAAC;IAE9D,IAAI,CAAC,OAAO;QACR,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,KAAK,CAAC,EAAE;AACnB"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Subham%20Bhattachrya/Desktop/EvalvAI-main/lib/gemini.ts"],"sourcesContent":["import { GoogleGenerativeAI } from '@google/generative-ai'\r\n\r\nconst apiKey = process.env.GEMINI_API_KEY\r\n\r\nif (!apiKey) {\r\n    console.error('âŒ GEMINI_API_KEY is not defined in environment variables')\r\n    console.error('Please check your .env.local file')\r\n    throw new Error('GEMINI_API_KEY is not defined in environment variables')\r\n}\r\n\r\nconsole.log('âœ… Gemini API Key loaded:', apiKey.substring(0, 10) + '...')\r\n\r\nconst genAI = new GoogleGenerativeAI(apiKey)\r\n\r\nexport const geminiModel = genAI.getGenerativeModel({ model: 'gemini-2.5-flash' })\r\n\r\nexport async function generateContent(prompt: string) {\r\n    try {\r\n        console.log('ðŸ¤– Calling Gemini API...')\r\n        const result = await geminiModel.generateContent(prompt)\r\n        const response = await result.response\r\n        const text = response.text()\r\n        console.log('âœ… Gemini API response received')\r\n        return text\r\n    } catch (error: any) {\r\n        console.error('âŒ Gemini API Error:', error)\r\n        console.error('Error details:', {\r\n            message: error.message,\r\n            status: error.status,\r\n            statusText: error.statusText\r\n        })\r\n\r\n        // Provide more specific error messages\r\n        if (error.message?.includes('API_KEY_INVALID')) {\r\n            throw new Error('Invalid Gemini API key. Please check your API key in .env.local')\r\n        }\r\n        if (error.message?.includes('QUOTA_EXCEEDED')) {\r\n            throw new Error('Gemini API quota exceeded. Please try again later or upgrade your plan')\r\n        }\r\n        if (error.message?.includes('RATE_LIMIT')) {\r\n            throw new Error('Rate limit exceeded. Please wait a moment and try again')\r\n        }\r\n\r\n        throw new Error(`Failed to generate content from Gemini API: ${error.message}`)\r\n    }\r\n}\r\n\r\nexport async function generateStreamContent(prompt: string) {\r\n    try {\r\n        const result = await geminiModel.generateContentStream(prompt)\r\n        return result.stream\r\n    } catch (error: any) {\r\n        console.error('âŒ Gemini API Stream Error:', error)\r\n        throw new Error(`Failed to generate stream from Gemini API: ${error.message}`)\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;AAEzC,IAAI,CAAC,QAAQ;IACT,QAAQ,KAAK,CAAC;IACd,QAAQ,KAAK,CAAC;IACd,MAAM,IAAI,MAAM;AACpB;AAEA,QAAQ,GAAG,CAAC,4BAA4B,OAAO,SAAS,CAAC,GAAG,MAAM;AAElE,MAAM,QAAQ,IAAI,oNAAkB,CAAC;AAE9B,MAAM,cAAc,MAAM,kBAAkB,CAAC;IAAE,OAAO;AAAmB;AAEzE,eAAe,gBAAgB,MAAc;IAChD,IAAI;QACA,QAAQ,GAAG,CAAC;QACZ,MAAM,SAAS,MAAM,YAAY,eAAe,CAAC;QACjD,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,MAAM,OAAO,SAAS,IAAI;QAC1B,QAAQ,GAAG,CAAC;QACZ,OAAO;IACX,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,QAAQ,KAAK,CAAC,kBAAkB;YAC5B,SAAS,MAAM,OAAO;YACtB,QAAQ,MAAM,MAAM;YACpB,YAAY,MAAM,UAAU;QAChC;QAEA,uCAAuC;QACvC,IAAI,MAAM,OAAO,EAAE,SAAS,oBAAoB;YAC5C,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,MAAM,OAAO,EAAE,SAAS,mBAAmB;YAC3C,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,MAAM,OAAO,EAAE,SAAS,eAAe;YACvC,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,IAAI,MAAM,CAAC,4CAA4C,EAAE,MAAM,OAAO,EAAE;IAClF;AACJ;AAEO,eAAe,sBAAsB,MAAc;IACtD,IAAI;QACA,MAAM,SAAS,MAAM,YAAY,qBAAqB,CAAC;QACvD,OAAO,OAAO,MAAM;IACxB,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM,CAAC,2CAA2C,EAAE,MAAM,OAAO,EAAE;IACjF;AACJ"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Subham%20Bhattachrya/Desktop/EvalvAI-main/app/api/github-crawler/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { fetchGitHubUser, fetchGitHubRepos, extractUsernameFromUrl } from '@/lib/github'\r\nimport { generateContent } from '@/lib/gemini'\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const { githubUrl } = await request.json()\r\n\r\n        if (!githubUrl) {\r\n            return NextResponse.json(\r\n                { error: 'GitHub URL is required' },\r\n                { status: 400 }\r\n            )\r\n        }\r\n\r\n        // Extract username from URL\r\n        const username = extractUsernameFromUrl(githubUrl)\r\n\r\n        // Fetch GitHub data\r\n        const [user, repos] = await Promise.all([\r\n            fetchGitHubUser(username),\r\n            fetchGitHubRepos(username)\r\n        ])\r\n\r\n        // Filter out forks and sort by stars\r\n        const originalRepos = repos.filter(repo => !repo.fork)\r\n\r\n        // Prepare data for Gemini analysis\r\n        const repoSummary = originalRepos.map(repo => ({\r\n            name: repo.name,\r\n            description: repo.description || 'No description',\r\n            language: repo.language || 'Unknown',\r\n            stars: repo.stargazers_count,\r\n            forks: repo.forks_count,\r\n            topics: repo.topics || [],\r\n            url: repo.html_url\r\n        }))\r\n\r\n        const prompt = `You are an expert developer and project analyst. Analyze the following GitHub profile and repositories.\r\n\r\nGitHub User: ${user.name || user.login}\r\nBio: ${user.bio || 'No bio'}\r\nTotal Public Repos: ${user.public_repos}\r\nFollowers: ${user.followers}\r\n\r\nRepositories (${originalRepos.length} original projects):\r\n${JSON.stringify(repoSummary, null, 2)}\r\n\r\nProvide a comprehensive analysis in the following JSON format (respond ONLY with valid JSON):\r\n{\r\n  \"profileSummary\": \"<2-3 sentence summary of the developer's profile and expertise>\",\r\n  \"projectTypes\": [\r\n    {\r\n      \"category\": \"<category name like 'Web Development', 'Machine Learning', etc>\",\r\n      \"count\": <number of projects>,\r\n      \"description\": \"<brief description of projects in this category>\"\r\n    }\r\n  ],\r\n  \"topSkills\": [<array of 5-8 main programming languages and technologies>],\r\n  \"bestProjects\": [\r\n    {\r\n      \"name\": \"<project name>\",\r\n      \"url\": \"<project URL>\",\r\n      \"reason\": \"<why this is one of the best projects>\",\r\n      \"highlights\": [<array of 2-3 key highlights>]\r\n    }\r\n  ],\r\n  \"overallAssessment\": \"<detailed paragraph about the developer's strengths, project quality, and recommendations>\"\r\n}\r\n\r\nSelect 3-5 best projects based on:\r\n- Stars and forks\r\n- Code quality indicators (description, topics, language)\r\n- Project complexity and impact\r\n- Recency and maintenance\r\n\r\nBe specific, insightful, and encouraging.`\r\n\r\n        const analysis = await generateContent(prompt)\r\n\r\n        // Parse the JSON response\r\n        let result\r\n        try {\r\n            const jsonMatch = analysis.match(/\\{[\\s\\S]*\\}/)\r\n            if (jsonMatch) {\r\n                result = JSON.parse(jsonMatch[0])\r\n            } else {\r\n                throw new Error('No JSON found')\r\n            }\r\n        } catch (parseError) {\r\n            // Fallback response\r\n            result = {\r\n                profileSummary: `${user.name || user.login} is a developer with ${user.public_repos} public repositories.`,\r\n                projectTypes: [{ category: 'General Development', count: originalRepos.length, description: 'Various projects' }],\r\n                topSkills: originalRepos.slice(0, 5).map(r => r.language).filter(Boolean),\r\n                bestProjects: originalRepos.slice(0, 3).map(r => ({\r\n                    name: r.name,\r\n                    url: r.html_url,\r\n                    reason: `${r.stargazers_count} stars`,\r\n                    highlights: [r.description || 'No description']\r\n                })),\r\n                overallAssessment: analysis.substring(0, 500)\r\n            }\r\n        }\r\n\r\n        return NextResponse.json({\r\n            user: {\r\n                username: user.login,\r\n                name: user.name,\r\n                bio: user.bio,\r\n                avatar: user.avatar_url,\r\n                profileUrl: user.html_url,\r\n                repos: user.public_repos,\r\n                followers: user.followers\r\n            },\r\n            analysis: result,\r\n            totalRepos: originalRepos.length\r\n        })\r\n    } catch (error: any) {\r\n        console.error('GitHub Crawler Error:', error)\r\n        return NextResponse.json(\r\n            { error: error.message || 'Failed to analyze GitHub profile' },\r\n            { status: 500 }\r\n        )\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,QAAQ,IAAI;QAExC,IAAI,CAAC,WAAW;YACZ,OAAO,8KAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAyB,GAClC;gBAAE,QAAQ;YAAI;QAEtB;QAEA,4BAA4B;QAC5B,MAAM,WAAW,IAAA,uKAAsB,EAAC;QAExC,oBAAoB;QACpB,MAAM,CAAC,MAAM,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;YACpC,IAAA,gKAAe,EAAC;YAChB,IAAA,iKAAgB,EAAC;SACpB;QAED,qCAAqC;QACrC,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAA,OAAQ,CAAC,KAAK,IAAI;QAErD,mCAAmC;QACnC,MAAM,cAAc,cAAc,GAAG,CAAC,CAAA,OAAQ,CAAC;gBAC3C,MAAM,KAAK,IAAI;gBACf,aAAa,KAAK,WAAW,IAAI;gBACjC,UAAU,KAAK,QAAQ,IAAI;gBAC3B,OAAO,KAAK,gBAAgB;gBAC5B,OAAO,KAAK,WAAW;gBACvB,QAAQ,KAAK,MAAM,IAAI,EAAE;gBACzB,KAAK,KAAK,QAAQ;YACtB,CAAC;QAED,MAAM,SAAS,CAAC;;aAEX,EAAE,KAAK,IAAI,IAAI,KAAK,KAAK,CAAC;KAClC,EAAE,KAAK,GAAG,IAAI,SAAS;oBACR,EAAE,KAAK,YAAY,CAAC;WAC7B,EAAE,KAAK,SAAS,CAAC;;cAEd,EAAE,cAAc,MAAM,CAAC;AACrC,EAAE,KAAK,SAAS,CAAC,aAAa,MAAM,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yCA8BE,CAAC;QAElC,MAAM,WAAW,MAAM,IAAA,gKAAe,EAAC;QAEvC,0BAA0B;QAC1B,IAAI;QACJ,IAAI;YACA,MAAM,YAAY,SAAS,KAAK,CAAC;YACjC,IAAI,WAAW;gBACX,SAAS,KAAK,KAAK,CAAC,SAAS,CAAC,EAAE;YACpC,OAAO;gBACH,MAAM,IAAI,MAAM;YACpB;QACJ,EAAE,OAAO,YAAY;YACjB,oBAAoB;YACpB,SAAS;gBACL,gBAAgB,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK,CAAC,qBAAqB,EAAE,KAAK,YAAY,CAAC,qBAAqB,CAAC;gBAC1G,cAAc;oBAAC;wBAAE,UAAU;wBAAuB,OAAO,cAAc,MAAM;wBAAE,aAAa;oBAAmB;iBAAE;gBACjH,WAAW,cAAc,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,EAAE,MAAM,CAAC;gBACjE,cAAc,cAAc,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA,IAAK,CAAC;wBAC9C,MAAM,EAAE,IAAI;wBACZ,KAAK,EAAE,QAAQ;wBACf,QAAQ,GAAG,EAAE,gBAAgB,CAAC,MAAM,CAAC;wBACrC,YAAY;4BAAC,EAAE,WAAW,IAAI;yBAAiB;oBACnD,CAAC;gBACD,mBAAmB,SAAS,SAAS,CAAC,GAAG;YAC7C;QACJ;QAEA,OAAO,8KAAY,CAAC,IAAI,CAAC;YACrB,MAAM;gBACF,UAAU,KAAK,KAAK;gBACpB,MAAM,KAAK,IAAI;gBACf,KAAK,KAAK,GAAG;gBACb,QAAQ,KAAK,UAAU;gBACvB,YAAY,KAAK,QAAQ;gBACzB,OAAO,KAAK,YAAY;gBACxB,WAAW,KAAK,SAAS;YAC7B;YACA,UAAU;YACV,YAAY,cAAc,MAAM;QACpC;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,8KAAY,CAAC,IAAI,CACpB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAmC,GAC7D;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}