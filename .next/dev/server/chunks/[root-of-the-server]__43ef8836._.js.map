{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Subham%20Bhattachrya/Desktop/EvalvAI-main/lib/gemini.ts"],"sourcesContent":["import { GoogleGenerativeAI } from '@google/generative-ai'\r\n\r\nconst apiKey = process.env.GEMINI_API_KEY\r\n\r\nif (!apiKey) {\r\n    console.error('‚ùå GEMINI_API_KEY is not defined in environment variables')\r\n    console.error('Please check your .env.local file')\r\n    throw new Error('GEMINI_API_KEY is not defined in environment variables')\r\n}\r\n\r\nconsole.log('‚úÖ Gemini API Key loaded:', apiKey.substring(0, 10) + '...')\r\n\r\nconst genAI = new GoogleGenerativeAI(apiKey)\r\n\r\nexport const geminiModel = genAI.getGenerativeModel({ model: 'gemini-2.5-flash' })\r\n\r\nexport async function generateContent(prompt: string) {\r\n    try {\r\n        console.log('ü§ñ Calling Gemini API...')\r\n        const result = await geminiModel.generateContent(prompt)\r\n        const response = await result.response\r\n        const text = response.text()\r\n        console.log('‚úÖ Gemini API response received')\r\n        return text\r\n    } catch (error: any) {\r\n        console.error('‚ùå Gemini API Error:', error)\r\n        console.error('Error details:', {\r\n            message: error.message,\r\n            status: error.status,\r\n            statusText: error.statusText\r\n        })\r\n\r\n        // Provide more specific error messages\r\n        if (error.message?.includes('API_KEY_INVALID')) {\r\n            throw new Error('Invalid Gemini API key. Please check your API key in .env.local')\r\n        }\r\n        if (error.message?.includes('QUOTA_EXCEEDED')) {\r\n            throw new Error('Gemini API quota exceeded. Please try again later or upgrade your plan')\r\n        }\r\n        if (error.message?.includes('RATE_LIMIT')) {\r\n            throw new Error('Rate limit exceeded. Please wait a moment and try again')\r\n        }\r\n\r\n        throw new Error(`Failed to generate content from Gemini API: ${error.message}`)\r\n    }\r\n}\r\n\r\nexport async function generateStreamContent(prompt: string) {\r\n    try {\r\n        const result = await geminiModel.generateContentStream(prompt)\r\n        return result.stream\r\n    } catch (error: any) {\r\n        console.error('‚ùå Gemini API Stream Error:', error)\r\n        throw new Error(`Failed to generate stream from Gemini API: ${error.message}`)\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;AAEzC,IAAI,CAAC,QAAQ;IACT,QAAQ,KAAK,CAAC;IACd,QAAQ,KAAK,CAAC;IACd,MAAM,IAAI,MAAM;AACpB;AAEA,QAAQ,GAAG,CAAC,4BAA4B,OAAO,SAAS,CAAC,GAAG,MAAM;AAElE,MAAM,QAAQ,IAAI,oNAAkB,CAAC;AAE9B,MAAM,cAAc,MAAM,kBAAkB,CAAC;IAAE,OAAO;AAAmB;AAEzE,eAAe,gBAAgB,MAAc;IAChD,IAAI;QACA,QAAQ,GAAG,CAAC;QACZ,MAAM,SAAS,MAAM,YAAY,eAAe,CAAC;QACjD,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,MAAM,OAAO,SAAS,IAAI;QAC1B,QAAQ,GAAG,CAAC;QACZ,OAAO;IACX,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,QAAQ,KAAK,CAAC,kBAAkB;YAC5B,SAAS,MAAM,OAAO;YACtB,QAAQ,MAAM,MAAM;YACpB,YAAY,MAAM,UAAU;QAChC;QAEA,uCAAuC;QACvC,IAAI,MAAM,OAAO,EAAE,SAAS,oBAAoB;YAC5C,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,MAAM,OAAO,EAAE,SAAS,mBAAmB;YAC3C,MAAM,IAAI,MAAM;QACpB;QACA,IAAI,MAAM,OAAO,EAAE,SAAS,eAAe;YACvC,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,IAAI,MAAM,CAAC,4CAA4C,EAAE,MAAM,OAAO,EAAE;IAClF;AACJ;AAEO,eAAe,sBAAsB,MAAc;IACtD,IAAI;QACA,MAAM,SAAS,MAAM,YAAY,qBAAqB,CAAC;QACvD,OAAO,OAAO,MAAM;IACxB,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM,CAAC,2CAA2C,EAAE,MAAM,OAAO,EAAE;IACjF;AACJ"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Subham%20Bhattachrya/Desktop/EvalvAI-main/app/api/resume-analyzer/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { generateContent } from '@/lib/gemini'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const formData = await request.formData()\n    const file = formData.get('file') as File\n\n    if (!file) {\n      return NextResponse.json(\n        { message: 'No file provided' },\n        { status: 400 }\n      )\n    }\n\n    // Extract text from file\n    const text = await file.text()\n\n    const prompt = `You are an expert resume analyst and career counselor. Analyze the following resume and provide detailed feedback.\n\nResume Content:\n${text}\n\nProvide your analysis in the following JSON format (respond ONLY with valid JSON, no additional text):\n{\n  \"score\": <number between 0-100>,\n  \"suggestedRoles\": [<array of 3-5 job role suggestions based on the resume>],\n  \"strengths\": [<array of 4-6 key strengths identified in the resume>],\n  \"improvements\": [<array of 4-6 specific actionable improvements>],\n  \"missingSkills\": [<array of 4-8 skills that would enhance the profile>],\n  \"overallFeedback\": \"<detailed paragraph with encouragement and specific advice>\"\n}\n\nBe specific, actionable, and encouraging in your feedback.`\n\n    const response = await generateContent(prompt)\n\n    // Parse the JSON response\n    let analysis\n    try {\n      // Extract JSON from response (in case there's extra text)\n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/)\n      if (jsonMatch) {\n        analysis = JSON.parse(jsonMatch[0])\n      } else {\n        throw new Error('No JSON found in response')\n      }\n    } catch (parseError) {\n      // Fallback if parsing fails\n      analysis = {\n        score: 75,\n        suggestedRoles: ['Software Engineer', 'Full Stack Developer', 'Backend Engineer'],\n        strengths: [\n          'Good technical foundation',\n          'Relevant experience demonstrated',\n          'Clear project descriptions'\n        ],\n        improvements: [\n          'Add quantifiable metrics to achievements',\n          'Include more technical depth',\n          'Optimize for ATS systems'\n        ],\n        missingSkills: ['System Design', 'Cloud Technologies', 'DevOps'],\n        overallFeedback: response.substring(0, 500)\n      }\n    }\n\n    return NextResponse.json(analysis)\n  } catch (error: any) {\n    console.error('Resume Analysis Error:', error)\n    return NextResponse.json(\n      { message: error.message || 'Failed to analyze resume' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,IAAI,CAAC,MAAM;YACT,OAAO,8KAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAmB,GAC9B;gBAAE,QAAQ;YAAI;QAElB;QAEA,yBAAyB;QACzB,MAAM,OAAO,MAAM,KAAK,IAAI;QAE5B,MAAM,SAAS,CAAC;;;AAGpB,EAAE,KAAK;;;;;;;;;;;;0DAYmD,CAAC;QAEvD,MAAM,WAAW,MAAM,IAAA,gKAAe,EAAC;QAEvC,0BAA0B;QAC1B,IAAI;QACJ,IAAI;YACF,0DAA0D;YAC1D,MAAM,YAAY,SAAS,KAAK,CAAC;YACjC,IAAI,WAAW;gBACb,WAAW,KAAK,KAAK,CAAC,SAAS,CAAC,EAAE;YACpC,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,YAAY;YACnB,4BAA4B;YAC5B,WAAW;gBACT,OAAO;gBACP,gBAAgB;oBAAC;oBAAqB;oBAAwB;iBAAmB;gBACjF,WAAW;oBACT;oBACA;oBACA;iBACD;gBACD,cAAc;oBACZ;oBACA;oBACA;iBACD;gBACD,eAAe;oBAAC;oBAAiB;oBAAsB;iBAAS;gBAChE,iBAAiB,SAAS,SAAS,CAAC,GAAG;YACzC;QACF;QAEA,OAAO,8KAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,8KAAY,CAAC,IAAI,CACtB;YAAE,SAAS,MAAM,OAAO,IAAI;QAA2B,GACvD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}